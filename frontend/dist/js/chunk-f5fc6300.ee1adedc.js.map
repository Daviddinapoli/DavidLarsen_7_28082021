{"version":3,"sources":["webpack:///./src/components/Login.vue?8dd3","webpack:///./src/components/Login.vue?ccfd","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?2227","webpack:///./src/components/Login.vue?21e5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","_v","directives","name","rawName","value","user","expression","domProps","on","resetErrors","$event","target","composing","$set","_s","errors","email","password","message","login","staticRenderFns","data","loggedIn","submitted","methods","validateUserData","length","console","log","event","preventDefault","Object","keys","AuthentificationDataService","e","component"],"mappings":"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","file":"js/chunk-f5fc6300.ee1adedc.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"form-signin\",attrs:{\"id\":\"app\"}},[_c('h1',{staticStyle:{\"text-align\":\"center\",\"margin-bottom\":\"4rem\"}},[_vm._v(\"\\n    Welcome to Groupomania!\\n  \")]),_c('div',{staticClass:\"col-lg-6 col-md-8 col-sm-12 m-auto\"},[_c('div',{staticClass:\"mb-3\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],staticClass:\"form-control\",attrs:{\"name\":\"email\",\"type\":\"email\",\"id\":\"email\",\"placeholder\":\"Ex: alexandre.dupon@gmail.com\",\"required\":\"\"},domProps:{\"value\":(_vm.user.email)},on:{\"keyup\":_vm.resetErrors,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}})]),_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.errors.email))])]),_c('div',{staticClass:\"mb-3\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"Password\")]),_c('div',{staticClass:\"input-group\",attrs:{\"id\":\"show_hide_password\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"form-control\",attrs:{\"name\":\"password\",\"id\":\"password\",\"placeholder\":\"\",\"required\":\"\",\"type\":\"password\"},domProps:{\"value\":(_vm.user.password)},on:{\"keyup\":_vm.resetErrors,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})]),_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.errors.password))])])]),_c('p',{staticClass:\"error-message error-message-gen\"},[_vm._v(_vm._s(_vm.message))]),_c('button',{staticClass:\"d-flex justify-content-center m-auto col-lg-3 col-md-4 col-sm-12 btn cta-success\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.login}},[_vm._v(\"\\n      Log in\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <form class=\"form-signin\" id=\"app\">\r\n    <h1 style=\"text-align: center; margin-bottom: 4rem\">\r\n      Welcome to Groupomania!\r\n    </h1>\r\n    <div class=\"col-lg-6 col-md-8 col-sm-12 m-auto\">\r\n      <div class=\"mb-3\">\r\n        <label for=\"email\">Email</label>\r\n        <div class=\"input-group\">\r\n          <input\r\n            name=\"email\"\r\n            type=\"email\"\r\n            id=\"email\"\r\n            class=\"form-control\"\r\n            v-model=\"user.email\"\r\n            placeholder=\"Ex: alexandre.dupon@gmail.com\"\r\n            required\r\n            @keyup=\"resetErrors\"\r\n          />\r\n        </div>\r\n        <p class=\"error-message\">{{ errors.email }}</p>\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password</label>\r\n          <div class=\"input-group\" id=\"show_hide_password\">\r\n            <input\r\n              name=\"password\"\r\n              id=\"password\"\r\n              class=\"form-control\"\r\n              v-model=\"user.password\"\r\n              placeholder=\"\"\r\n              required\r\n              type=\"password\"\r\n              @keyup=\"resetErrors\"\r\n            />\r\n          </div>\r\n          <p class=\"error-message\">{{ errors.password }}</p>\r\n        </div>\r\n      </div>\r\n      <p class=\"error-message error-message-gen\">{{ message }}</p>\r\n      <button\r\n        class=\"d-flex justify-content-center m-auto col-lg-3 col-md-4 col-sm-12 btn cta-success\"\r\n        type=\"submit\"\r\n        @click=\"login\"\r\n      >\r\n        Log in\r\n      </button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport AuthentificationDataService from \"../services/AuthentificationDataService\";\r\nimport validator from \"validator\";\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      user: {\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n      errors: {\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n      loggedIn: false,\r\n      submitted: true,\r\n      message: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    validateUserData() {\r\n      const errors = {};\r\n      if (this.user.email.length === 0) {\r\n        errors.email = \"Please fill in an email\";\r\n      }\r\n      console.log(validator.isEmail(this.user.email));\r\n      if (this.user.email.length !== 0 && !validator.isEmail(this.user.email)) {\r\n        errors.email = \"Please enter a correct email address\";\r\n      }\r\n      if (this.user.password.length === 0) {\r\n        errors.password = \"Please enter a password\";\r\n      }\r\n      return errors;\r\n    },\r\n    login(event) {\r\n      event.preventDefault();\r\n      const errors = this.validateUserData();\r\n      if (Object.keys(errors).length) {\r\n        this.errors = errors;\r\n        return;\r\n      }\r\n      const data = {\r\n        email: this.user.email,\r\n        password: this.user.password,\r\n      };\r\n      AuthentificationDataService.connectUser(data)\r\n        .then((response) => {\r\n          localStorage.setItem(\"userId\", JSON.stringify(response.data.userId));\r\n          localStorage.setItem(\"jwt\", response.data.token);\r\n          localStorage.setItem(\"role\", response.data.role);\r\n          if (localStorage.getItem(\"jwt\") != null) {\r\n            if (this.$route.params.nextUrl != null) {\r\n              this.$router.push(this.$route.params.nextUrl);\r\n            } else {\r\n              this.$router.push(\"/posts\");\r\n            }\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.message = \"Incorrect password or email\";\r\n          console.log(\"error\", error);\r\n        });\r\n    },\r\n    resetErrors(e) {\r\n      this.errors[e.target.name] = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../assets/custom.scss\";\r\n.form-connexion {\r\n  margin: 4rem auto;\r\n}\r\n.error-message {\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n  color: red;\r\n}\r\n.error-message-gen {\r\n  text-align: center !important;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3f6cb2f9&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}