(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-213574c6"],{2513:function(t,e,n){"use strict";var o=n("d4ec"),a=n("bee2"),s=n("6acf"),r=function(){function t(){Object(o["a"])(this,t)}return Object(a["a"])(t,[{key:"getAll",value:function(t){return s["a"].get("/posts?page=".concat(t))}},{key:"getById",value:function(t){return s["a"].get("/posts/".concat(t))}},{key:"create",value:function(t){return s["a"].post("/posts",t)}},{key:"update",value:function(t,e){return s["a"].put("/posts/".concat(t),e)}},{key:"delete",value:function(t){return s["a"].delete("/posts/".concat(t))}}]),t}();e["a"]=new r},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("1d80"),a=n("577e"),s=n("5899"),r="["+s+"]",c=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),l=function(t){return function(e){var n=a(o(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(t,e,n){var o=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var s,r;return a&&"function"==typeof(s=e.constructor)&&s!==n&&o(r=s.prototype)&&r!==n.prototype&&a(t,r),t}},"9c93":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"single-post"}},[n("div",{staticClass:"post"},[n("h1",{staticClass:"title"},[t._v(t._s(t.post.title))]),n("p",{staticClass:"articles-datas"},[n("span",{staticClass:"author-name"},[t._v("Written by\n        "),n("b",[n("em",[t._v(t._s(t.post.author.firstName)+" "+t._s(t.post.author.lastName))])])]),t._v(",\n      "+t._s(t.formatDate(t.post.createdAt))+"\n    ")]),n("p",[t._v(t._s(t.post.content))]),t.userId==t.post.userId||t.isAdmin?n("div",[n("button",{staticClass:"btn cta-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#exampleModal"}},[t._v("\n        Edit\n      ")]),n("button",{staticClass:"btn-danger btn",on:{click:function(e){return t.removePost(t.post.id)}}},[t._v("\n        Remove\n      ")])]):t._e()]),t.post.comments.length?n("div",{staticClass:"mt-5"},[t._m(0),n("hr"),t._l(t.post.comments,(function(e){return n("div",{key:e.id,staticClass:"comment"},[n("p",[n("font-awesome-icon",{staticClass:"icon-user",attrs:{icon:"user"}}),n("span",[t._v(t._s(e.author.firstName)+" "+t._s(e.author.lastName))])],1),n("p",{staticClass:"data"},[t._v("\n        "+t._s(t.formatDate(e.createdAt))+"\n      ")]),n("p",{staticClass:"content-comment"},[n("em",[t._v(t._s(e.content))])]),t.userId==e.userId?n("button",{staticClass:"btn-danger btn",on:{click:function(n){return t.removeComment(e.id)}}},[t._v("\n        Delete\n      ")]):t._e(),n("hr")])}))],2):t._e(),n("div",{staticClass:"mt-5 mb-5 create-comment-box"},[t._m(1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"col-lg-6 col-md-12 form-control",attrs:{name:"commentContent",id:"comment-section",cols:"84",rows:"5"},domProps:{value:t.newComment.content},on:{keyup:t.resetErrors,input:function(e){e.target.composing||t.$set(t.newComment,"content",e.target.value)}}}),n("button",{staticClass:"cta-success btn",on:{click:t.addComment}},[t._v("Add comment")]),n("p",{staticClass:"message-error"},[t._v(t._s(t.message))])]),n("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("label",{attrs:{for:"post-title"}},[t._v("Article title")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"form-control",attrs:{name:"post-title",id:"post-title"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._m(2)]),n("div",{staticClass:"modal-body flex-sirection column"},[n("label",{attrs:{for:"content-post"}},[t._v("Article content")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.content,expression:"post.content"}],staticClass:"form-control",attrs:{id:"content-post",name:"post-content"},domProps:{value:t.post.content},on:{input:function(e){e.target.composing||t.$set(t.post,"content",e.target.value)}}})]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn cta-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.updatePost}},[t._v("\n            Save\n          ")])])])])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("b",[t._v("Comments")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"comment-section"}},[n("b",[t._v("Comment")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],s=(n("a9e3"),n("2513")),r=n("d4ec"),c=n("bee2"),i=n("6acf"),l=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"create",value:function(t){return i["a"].post("/comments",t)}},{key:"delete",value:function(t){return i["a"].delete("/comments/".concat(t))}}]),t}(),u=new l,m={name:"PostsList",data:function(){return{post:{author:{},comments:[]},newComment:{id:null,content:"",postId:null,userId:null},userId:null,submitted:!1,isAdmin:!1,errors:{content:""},message:""}},methods:{getPostById:function(){var t=this,e=this.$route.params.id;s["a"].getById(e).then((function(e){t.post=e.data.post})).catch((function(t){console.log(t)}))},updatePost:function(){var t=this,e=this.$route.params.id,n={title:this.post.title,content:this.post.content,userId:this.post.userId};s["a"].update(e,n).then((function(e){t.post.id=e.data.id,t.submitted=!0,window.location.reload()})).catch((function(){console.log("error")}))},removePost:function(t){var e=this;s["a"].delete(t).then((function(){e.$router.push("/posts")})).catch((function(t){console.log(t)}))},addComment:function(){var t=this,e={content:this.newComment.content,postId:this.$route.params.id,userId:Number(localStorage.getItem("userId"))};0!==e.content.length?u.create(e).then((function(e){t.submitted=!0,console.log(e),window.location.reload()})):this.message="Please enter your text"},removeComment:function(t){u.delete(t).then((function(t){console.log(t.data),window.location.reload()})).catch((function(t){console.log(t)}))},formatDate:function(t){return new Date(t).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},resetErrors:function(){this.message=""}},mounted:function(){this.getPostById(),this.userId=localStorage.getItem("userId"),this.isAdmin="admin"===localStorage.getItem("role")}},d=m,p=(n("bef4"),n("2877")),f=Object(p["a"])(d,o,a,!1,null,null,null);e["default"]=f.exports},a9e3:function(t,e,n){"use strict";var o=n("83ab"),a=n("da84"),s=n("94ca"),r=n("6eeb"),c=n("5135"),i=n("c6b6"),l=n("7156"),u=n("d9b5"),m=n("c04e"),d=n("d039"),p=n("7c73"),f=n("241c").f,v=n("06cf").f,h=n("9bf2").f,b=n("58a8").trim,g="Number",_=a[g],C=_.prototype,I=i(p(C))==g,y=function(t){if(u(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,o,a,s,r,c,i,l=m(t,"number");if("string"==typeof l&&l.length>2)if(l=b(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+l}for(s=l.slice(2),r=s.length,c=0;c<r;c++)if(i=s.charCodeAt(c),i<48||i>a)return NaN;return parseInt(s,o)}return+l};if(s(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,N=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof N&&(I?d((function(){C.valueOf.call(n)})):i(n)!=g)?l(new _(y(e)),n,N):y(e)},E=o?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;E.length>x;x++)c(_,w=E[x])&&!c(N,w)&&h(N,w,v(_,w));N.prototype=C,C.constructor=N,r(a,g,N)}},bef4:function(t,e,n){"use strict";n("f322")},f322:function(t,e,n){}}]);
//# sourceMappingURL=chunk-213574c6.c2e4a919.js.map